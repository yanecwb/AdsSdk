export default async () => {
  const w = window as any;
  w.outAdsClick = false;
  w.outAdsCountEnd = false;
  const body = document.querySelector("body") as HTMLBodyElement;
  body.style.overflow = "hidden";
  const div = document.createElement("div");
  div.className = "shadow_container";
  document.body.appendChild(div);
  w.shadowRoot = div.attachShadow({ mode: "closed" });
  w.shadowRoot.innerHTML = `
     <style>body{background-color:#f0f2f5;display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0}.ads_container{width:100vw;height:100vh;background-image:linear-gradient(60deg,#f3ebbb 0,#abecd6 100%);padding-top:40px;box-sizing:border-box;position:relative;z-index:99999999;position:fixed;top:0}.ads_container::before{height:100%;background-image:url(https://telegram.org/img/tgme/pattern.svg);background-position:50%;background-repeat:no-repeat;background-size:cover;content:"";filter:brightness(0) saturate(100%) invert(67%) sepia(28%) saturate(407%) hue-rotate(66deg) brightness(87%) contrast(88%);inset:0;mix-blend-mode:normal;opacity:1;position:absolute}._post_18txr_1{animation-duration:.1s;animation-fill-mode:forwards;animation-name:_show_18txr_1;animation-play-state:running;animation-timing-function:ease-out;display:flex;position:relative}._channel_18txr_21{align-self:end;cursor:pointer;height:40px;margin:0 4px 0 10px;width:40px}._icon_18txr_29{background-color:#f0f0f0;border-radius:100%;height:40px;object-fit:cover;width:40px}._tail_18txr_37{align-self:end;color:#fff;display:flex;height:10px;width:6px;z-index:1}._tail_18txr_37 svg{height:10px;width:6px}._message_18txr_55{background-color:#fff;border-radius:18px 18px 7px 0;box-shadow:0 1px 2px #00000029;display:flex;flex-direction:column;position:relative;width:70%;padding:3px;padding-bottom:5px;box-sizing:border-box}._message_18txr_55 img{border-radius:16px 16px 5px 5px;object-fit:cover;h}._button_1ykdg_1{animation-duration:.5s;animation-fill-mode:forwards;animation-name:_show_1ykdg_1;animation-play-state:running;animation-timing-function:cubic-bezier(.2,0,0,1);background-color:transparent;border:none;border-radius:6px 6px 15px 15px;color:#fff;cursor:pointer;font-size:15px;height:40px;letter-spacing:.03em;line-height:40px;margin:4px 0 0 60px;overflow:hidden;padding:0 12px;position:relative;text-align:center;text-overflow:ellipsis;white-space:nowrap;width:70%;z-index:1;box-sizing:border-box}._button_1ykdg_1:before{background:rgb(84 140 73 / 50%);border-radius:7px 7px 15px 15px;content:"";inset:0;position:absolute;z-index:-1}@keyframes _show_1ykdg_1{0%{opacity:0;transform:translateY(-20px) scale(.1)}100%{opacity:1;transform:translateY(0) scale(1)}}._timer_1s77f_1{padding:0 12px;position:relative;width:fit-content;z-index:1;margin:10px 0}._label_dbgk3_1{border-radius:12px;cursor:pointer;padding:0 12px;position:relative;width:fit-content;z-index:1}._label_dbgk3_1:before,._timer_1s77f_1::before{background:rgb(84 140 73 / 50%);border-radius:12px;content:"";inset:0;position:absolute;z-index:-1}._text_dbgk3_19,._time_1s77f_1{color:#fff;font-size:13;line-height:23px;text-align:center;vertical-align:top}.flex_center{display:flex;flex-direction:column;justify-content:center;align-items:center}a{text-decoration:none;color:#fff}</style><div class=ads_container><div class=_post_18txr_1><div class=_channel_18txr_21><img alt=channel src=https://ooo.0x0.ooo/2024/12/02/OLxLBN.png class=_icon_18txr_29></div><div class=_tail_18txr_37><svg fill=currentColor viewBox="0 0 6 10"xmlns=http://www.w3.org/2000/svg><path d="M0 9c4.5-.5 6-5.5 6-9v10H0V9Z"></path></svg></div><div class=_message_18txr_55><div style="min-height: 200px;"><img alt=""src=https://ooo.0x0.ooo/2024/12/02/OLx4Ja.png> </div><div style="font-size:14px;color:#333;padding:0 8px"><div style="padding:10px 0">Games, rewards, TON, and USDT are waiting for you! Join now and start earning your rewards today! Don’t miss out on this exciting opportunity!</div><div>TON and USDT are waiting for you!</div></div></div></div><div class=btn_container></div><div class=flex_center style=position:fixed;bottom:20px;width:100vw><div class=_timer_1s77f_1><span class=_time_1s77f_1>00:15</span></div><div class=_label_dbgk3_1><span class=_text_dbgk3_19>@adspaw – ads in Telegram</span></div></div></div>
   `;
  const script = document.createElement("script");
  script.className = "shadow_script";
  script.innerHTML = `
   (() => { let formattedTime = "00:00"; let countdown = 15; function formatTime(seconds) { const hours = Math.floor(seconds / 3600); const minutes = Math.floor((seconds % 3600) / 60); const remainingSeconds = seconds % 60; let timeString; if (hours > 0) { timeString = String(hours).padStart(2, "0") + ":" + String(minutes).padStart(2, "0") + ":" + String(remainingSeconds).padStart(2, "0"); } else { timeString = String(minutes).padStart(2, "0") + ":" + String(remainingSeconds).padStart(2, "0"); } return timeString; } function startCountdown() { const timer = setInterval(() => { if (countdown > 0) { countdown--; formattedTime = formatTime(countdown); window.shadowRoot.querySelector("._time_1s77f_1").innerText = formattedTime; if (15 - countdown === 2) { window.shadowRoot.querySelector(".btn_container").innerHTML = \` <a href=https://psegeevalrat.net/4/8256878 target=_blank><div class=_button_1ykdg_1>Go Play</div></a><div style=color:#333;font-size:12px;font-family:cursive;text-align:center>Click the button to get rewards</div>\`; window.shadowRoot .querySelector(".btn_container") .addEventListener("click", () => { window.outAdsClick = true; }); } } else { formattedTime = "00:00"; document.querySelector(".shadow_container").remove(); document.querySelector(".shadow_script").remove(); document.querySelector("body").style.overflow = ""; window.outAdsCountEnd = true; clearInterval(timer); } }, 1000); } startCountdown(); })();
  `;

  body.appendChild(script);
};
